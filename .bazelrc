# ================== Bzlmod ==================
common --enable_bzlmod

# ================== C++ Settings ==================
build --cxxopt=-std=c++20
build --host_cxxopt=-std=c++20

# ================== Platform Configs ==================
# These configs work from any supported host platform:
#   - Linux x86_64
#   - macOS aarch64 (Apple Silicon)

# Build for Linux x86_64
# Use: bazel build --config=linux-x86_64 //...
build:linux-x86_64 --platforms=@toolchains_llvm//platforms:linux-x86_64

# Build for Linux aarch64 (ARM64)
# Use: bazel build --config=linux-aarch64 //...
build:linux-aarch64 --platforms=@toolchains_llvm//platforms:linux-aarch64

# Build for macOS aarch64 (Apple Silicon) - native builds on M1/M2/M3
# Use: bazel build --config=macos-aarch64 //...
build:macos-aarch64 --platforms=@toolchains_llvm//platforms:darwin-aarch64

# ================== Hermeticity ==================
# Prevent leaking host environment into builds
build --incompatible_strict_action_env

# ================== Performance ==================
build --jobs=auto

# ================== Error Output ==================
# Show test errors immediately
test --test_output=errors
